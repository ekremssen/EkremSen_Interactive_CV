<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Ekrem Åen â€“ EtkileÅŸimli Sesli CV</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Cache support (not always enough alone, but helps) -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    :root {
      --bg: #050819;
      --bg-soft: #090c24;
      --bg-card: #0d102b;
      --accent: #3ddcff;
      --accent-soft: rgba(61, 220, 255, 0.18);
      --accent-strong: #7c3bff;
      --text: #f5f5ff;
      --text-soft: #a5b0d6;
      --danger: #ff5c7a;
    }

    body {
      background: radial-gradient(circle at top, #14183b 0, #050819 55%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 16px;
    }

    .cv-shell {
      width: 100%;
      max-width: 1220px;
      background: linear-gradient(135deg, rgba(124, 59, 255, 0.45), transparent 40%),
        linear-gradient(-135deg, rgba(61, 220, 255, 0.32), transparent 45%),
        radial-gradient(circle at top, #11153a, #050819 55%);
      border-radius: 24px;
      padding: 20px 18px 26px;
      box-shadow: 0 0 0 1px rgba(120, 150, 255, 0.22), 0 26px 60px rgba(0, 0, 0, 0.85);
      position: relative;
      overflow: hidden;
    }

    @media (min-width: 900px) {
      .cv-shell { padding: 28px 32px 32px; }
    }

    .glow-border {
      position: absolute;
      inset: 0;
      border-radius: 24px;
      padding: 1px;
      background: radial-gradient(circle at 0 0, #3ddcff 0, transparent 55%),
        radial-gradient(circle at 100% 0, #7c3bff 0, transparent 55%);
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events: none;
      opacity: 0.4;
    }

    .cv-inner { position: relative; z-index: 1; }

    .top-layout { display: flex; flex-direction: column; gap: 20px; }
    @media (min-width: 960px) {
      .top-layout { flex-direction: row; align-items: stretch; }
    }

    .hero-left { flex: 1.2; display: flex; flex-direction: column; gap: 18px; }
    .hero-right { flex: 1.05; display: flex; flex-direction: column; gap: 16px; }

    .badge-row { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; }

    .chip {
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(5, 10, 40, 0.85);
      border: 1px solid rgba(116, 141, 255, 0.4);
      color: var(--text-soft);
      font-size: 11px;
      letter-spacing: 0.02em;
      text-transform: uppercase;
    }

    .name-row { display: flex; align-items: center; gap: 14px; flex-wrap: wrap; }
    .name-row h1 {
      font-size: clamp(26px, 3vw, 32px);
      font-weight: 700;
      letter-spacing: 0.04em;
      text-shadow: 0 0 25px rgba(125, 220, 255, 0.8);
    }

    .wave { font-size: 22px; }

    .subtitle {
      font-size: 13px;
      color: var(--text-soft);
      max-width: 560px;
      line-height: 1.5;
    }

    .link-row { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 4px; }

    .link-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(144, 167, 255, 0.55);
      text-decoration: none;
      font-size: 11px;
      color: var(--text-soft);
      background: rgba(4, 8, 30, 0.92);
      transition: border 0.2s, background 0.2s, transform 0.12s;
    }

    .link-pill:hover {
      border-color: var(--accent);
      background: rgba(24, 34, 96, 0.96);
      transform: translateY(-1px);
    }

    .link-dot { width: 7px; height: 7px; border-radius: 999px; background: var(--accent); }

    .tabs-row { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px; }

    .mode-tab {
      border-radius: 999px;
      padding: 6px 12px;
      border: 1px solid rgba(129, 148, 255, 0.5);
      background: rgba(4, 10, 34, 0.9);
      color: var(--text-soft);
      font-size: 11px;
      cursor: pointer;
      transition: background 0.16s, border 0.16s, transform 0.12s;
    }

    .mode-tab.active {
      background: radial-gradient(circle at top, var(--accent) 0, #18b9ff 40%) border-box;
      border-color: transparent;
      color: #04101a;
      font-weight: 600;
      transform: translateY(-1px);
      text-shadow: 0 0 12px rgba(0, 0, 0, 0.8);
    }

    .mode-tab.secondary { border-color: rgba(80, 104, 204, 0.7); }

    .avatar-shell {
      align-self: center;
      margin-top: 4px;
      position: relative;
      width: min(210px, 60vw);
      aspect-ratio: 1/1;
      border-radius: 50%;
      background: radial-gradient(circle at center, #14172e 0, #050819 56%, #02030a 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 60px rgba(72, 201, 255, 0.45);
      overflow: hidden;
    }

    .avatar-shell::before {
      content: "";
      position: absolute;
      inset: -12px;
      border-radius: inherit;
      background: radial-gradient(circle at center, var(--accent) 0, transparent 58%);
      opacity: 0.55;
      filter: blur(2px);
      z-index: 0;
    }

    .avatar-shell img {
      position: relative;
      z-index: 1;
      width: 86%;
      height: 86%;
      border-radius: inherit;
      object-fit: cover;
      box-shadow: 0 16px 40px rgba(0, 0, 0, 0.9);
    }

    .avatar-ring {
      position: absolute;
      inset: 6%;
      border-radius: 50%;
      border: 2px solid rgba(148, 215, 255, 0.38);
      z-index: 0;
    }

    .avatar-shell.speaking::after {
      content: "";
      position: absolute;
      inset: -10%;
      border-radius: 50%;
      border: 2px solid rgba(61, 220, 255, 0.6);
      filter: blur(3px);
      animation: pulse 1.3s infinite;
    }

    @keyframes pulse {
      0% { opacity: 0.1; transform: scale(1); }
      50% { opacity: 0.6; transform: scale(1.06); }
      100% { opacity: 0.1; transform: scale(1); }
    }

    .lang-toggle {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px;
      border-radius: 999px;
      border: 1px solid rgba(137, 158, 255, 0.65);
      background: rgba(3, 7, 24, 0.95);
      font-size: 10px;
      margin-top: 4px;
      align-self: flex-start;
    }

    .lang-pill { border-radius: 999px; padding: 2px 7px; cursor: pointer; opacity: 0.55; }
    .lang-pill.active { background: var(--accent-soft); opacity: 1; font-weight: 600; color: var(--accent); }

    .timeline-card, .projects-card, .skills-card, .qa-card {
      background: radial-gradient(circle at top left, #181d4d 0, #0a0d27 55%);
      border-radius: 18px;
      padding: 14px 16px 16px;
      border: 1px solid rgba(134, 155, 255, 0.4);
      box-shadow: 0 18px 35px rgba(0, 0, 0, 0.85);
    }

    .card-title {
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--text-soft);
      margin-bottom: 8px;
      display: flex;
      justify-content: space-between;
      gap: 8px;
      align-items: center;
    }

    .card-title span {
      font-size: 11px;
      font-weight: 400;
      color: rgba(159, 176, 238, 0.9);
    }

    .timeline-list { display: flex; flex-direction: column; gap: 10px; font-size: 12px; }
    .timeline-item {
      padding: 8px 10px;
      border-radius: 12px;
      background: rgba(7, 11, 39, 0.9);
      border: 1px solid rgba(99, 122, 255, 0.45);
    }
    .timeline-item strong { font-size: 12px; }
    .timeline-item .company { font-size: 11px; color: var(--text-soft); }
    .timeline-item .meta { font-size: 10px; color: rgba(160, 174, 236, 0.9); margin-top: 2px; }

    .pill-row { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 6px; }
    .mini-pill {
      font-size: 10px;
      padding: 3px 7px;
      border-radius: 999px;
      border: 1px solid rgba(114, 147, 255, 0.6);
      color: rgba(195, 206, 255, 0.96);
    }

    .projects-grid { display: grid; grid-template-columns: minmax(0, 1fr); gap: 8px; margin-top: 4px; }
    @media (min-width: 900px) {
      .projects-grid { grid-template-columns: minmax(0, 1fr) minmax(0, 1fr); }
    }

    .project-item {
      padding: 8px 10px;
      border-radius: 12px;
      background: rgba(7, 11, 39, 0.9);
      border: 1px solid rgba(89, 119, 255, 0.5);
      font-size: 11px;
    }

    .project-item h4 { font-size: 11.5px; margin-bottom: 2px; }
    .project-item .meta { font-size: 10px; color: rgba(166, 182, 238, 0.95); margin-bottom: 3px; }
    .project-item ul { margin-left: 14px; margin-top: 2px; }
    .project-item li { margin-bottom: 2px; }

    .skills-bars { display: grid; grid-template-columns: minmax(0, 1fr); gap: 6px; margin-top: 6px; }
    @media (min-width: 600px) {
      .skills-bars { grid-template-columns: minmax(0, 1fr) minmax(0, 1fr); }
    }

    .skill-line { font-size: 11px; }
    .skill-label { display: flex; justify-content: space-between; color: var(--text-soft); margin-bottom: 2px; }
    .skill-bar { height: 6px; border-radius: 999px; background: rgba(40, 46, 104, 0.9); overflow: hidden; }
    .skill-fill { height: 100%; border-radius: inherit; background: linear-gradient(90deg, #3ddcff, #7c3bff); box-shadow: 0 0 14px rgba(61, 220, 255, 0.7); }

    .about-text {
      font-size: 12px;
      color: var(--text-soft);
      line-height: 1.55;
      margin-top: 6px;
      white-space: pre-line; /* important for \n */
    }

    .about-list { font-size: 11.5px; margin-top: 6px; color: var(--text-soft); padding-left: 16px; }

    .qa-card { margin-top: 18px; }

    .qa-layout {
      display: grid;
      grid-template-columns: minmax(0, 1.35fr) minmax(0, 1fr);
      gap: 10px;
      margin-top: 8px;
    }
    @media (max-width: 880px) { .qa-layout { grid-template-columns: minmax(0, 1fr); } }

    .qa-buttons { display: flex; flex-direction: column; gap: 6px; }

    .qa-btn {
      width: 100%;
      text-align: left;
      font-size: 11px;
      padding: 7px 9px;
      border-radius: 10px;
      border: 1px solid rgba(114, 144, 255, 0.5);
      background: rgba(5, 10, 35, 0.96);
      color: var(--text-soft);
      cursor: pointer;
      transition: background 0.14s, border 0.14s, transform 0.08s;
    }

    .qa-btn:hover {
      background: rgba(24, 33, 82, 0.98);
      border-color: var(--accent);
      transform: translateY(-1px);
    }

    .qa-answer {
      min-height: 110px;
      border-radius: 12px;
      border: 1px solid rgba(128, 152, 255, 0.8);
      background: rgba(5, 9, 36, 0.98);
      font-size: 12px;
      padding: 9px 11px;
      line-height: 1.55;
      color: var(--text-soft);
      overflow-y: auto;
      white-space: pre-line; /* important */
    }

    .qa-answer strong { color: #ffffff; }

    .qa-footer {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      margin-top: 8px;
      font-size: 11px;
      color: var(--text-soft);
    }

    .qa-footer span { opacity: 0.8; }

    .qa-input-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      align-items: center;
      margin-top: 10px;
    }

    .qa-input-wrapper {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 5px;
      border-radius: 999px;
      padding: 5px 10px;
      border: 1px solid rgba(118, 139, 255, 0.6);
      background: rgba(3, 7, 24, 0.98);
    }

    .qa-input-wrapper input {
      flex: 1;
      border: none;
      background: transparent;
      color: var(--text);
      font-size: 12px;
      outline: none;
    }

    .qa-input-wrapper input::placeholder { color: rgba(168, 180, 233, 0.7); }

    .send-btn {
      border-radius: 999px;
      padding: 7px 16px;
      font-size: 12px;
      border: none;
      cursor: pointer;
      background: linear-gradient(135deg, #3ddcff, #23e3a2);
      color: #031019;
      font-weight: 600;
      box-shadow: 0 10px 26px rgba(21, 210, 173, 0.45);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .send-btn:hover { filter: brightness(1.07); }

    .io-controls { display: flex; gap: 8px; margin-top: 8px; }

    .io-btn {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      border: 1px solid rgba(128, 152, 255, 0.8);
      background: rgba(6, 10, 36, 0.98);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.16s, border 0.16s, transform 0.08s;
    }

    .io-btn span { font-size: 15px; }

    .io-btn.active {
      background: radial-gradient(circle at top, #3ddcff 0, #178fdf 55%);
      border-color: transparent;
      transform: translateY(-1px);
    }

    .io-btn:hover:not(.active) { background: rgba(28, 36, 86, 0.98); }

    .small-note { font-size: 10px; color: rgba(158, 176, 235, 0.9); }

    .en-summary {
      font-size: 11px;
      color: rgba(184, 195, 245, 0.98);
      margin-top: 8px;
      line-height: 1.5;
      border-top: 1px dashed rgba(99, 120, 216, 0.7);
      padding-top: 6px;
    }

    .en-summary strong { color: #ffffff; }

    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-thumb { background: rgba(123, 146, 255, 0.7); border-radius: 999px; }
  </style>
</head>

<body>
  <div class="cv-shell">
    <div class="glow-border"></div>
    <div class="cv-inner">
      <div class="top-layout">
        <!-- LEFT -->
        <section class="hero-left">
          <div class="badge-row">
            <div class="chip" id="chip-role">Senior Business Analyst Team Lead / Product Manager</div>
            <div class="chip" id="chip-domain">Sermaye PiyasalarÄ±, Ã–deme Sistemleri, Dijital CÃ¼zdan</div>
          </div>

          <div class="name-row">
            <h1>Ekrem Åen</h1>
            <span class="wave">ğŸ‘‹</span>
          </div>

          <p class="subtitle" id="about-short-tr">
            Sermaye piyasalarÄ±, Ã¶deme sistemleri ve dijital cÃ¼zdan tarafÄ±nda uÃ§tan uca
            iÅŸ analizi, entegrasyon ve Ã¼rÃ¼n yÃ¶netimi yapan; regÃ¼lasyon, API mimarisi
            ve ekip liderliÄŸi alanlarÄ±nda hibrit Ã§alÄ±ÅŸan bir Senior Business Analyst
            Team Lead / Product Manager profilim var.
          </p>

          <p class="subtitle" id="about-short-en" style="display:none;">
            I am an experienced Senior Business Analyst Team Lead / Product Manager in
            capital markets, payment systems, and digital walletsâ€”combining end-to-end
            analysis, API integration, regulatory compliance, and cross-functional leadership.
          </p>

          <div class="link-row">
            <a class="link-pill" href="https://www.linkedin.com/in/ekremsen" target="_blank" rel="noreferrer">
              <span class="link-dot"></span>
              <span id="link-linkedin">LinkedIn Profilim</span>
            </a>
            <a class="link-pill" href="https://ekremsen.medium.com" target="_blank" rel="noreferrer">
              <span class="link-dot"></span>
              <span id="link-medium">Medium YazÄ±larÄ±m</span>
            </a>
          </div>

          <div class="tabs-row">
            <button class="mode-tab active" data-mode="genel" id="tab-genel">Genel Mod</button>
            <button class="mode-tab secondary" data-mode="mulakat" id="tab-mulakat">MÃ¼lakat Modu</button>
            <button class="mode-tab secondary" data-mode="teknik" id="tab-teknik">Teknik Mod</button>
            <button class="mode-tab secondary" data-mode="xr" id="tab-xr">XR / EtkileÅŸim Modu</button>
          </div>

          <div class="lang-toggle">
            <span id="lang-label" style="opacity:0.7;">Dil:</span>
            <span class="lang-pill" data-lang="tr">TR</span>
            <span class="lang-pill" data-lang="en">EN</span>
          </div>

          <div class="about-text" id="mode-text"></div>

          <ul class="about-list" id="about-list"></ul>

          <div class="en-summary" id="en-summary" style="display:none;">
            <strong>English snapshot for hiring managers &amp; CTOs:</strong>
            Ekrem is a hybrid Senior Business Analyst &amp; Product Manager with
            deep experience in capital markets, payment systems, digital wallets and
            SIM-block removal. He bridges business, regulation and technology,
            speaks the language of developers and stakeholders, and focuses on
            measurable outcomes rather than only documents. This interactive CV
            lets you explore his profile through voice, HR Q&amp;A and project
            sections.
          </div>
        </section>

        <!-- RIGHT -->
        <section class="hero-right">
          <div class="avatar-shell" id="avatar">
            <div class="avatar-ring"></div>
            <img src="ekrem-photo.jpg" alt="Ekrem Åen Avatar" />
          </div>

          <div class="timeline-card">
            <div class="card-title">
              <div id="timeline-title">Kariyer Zaman Ã‡izelgesi</div>
              <span id="timeline-sub">Son roller ve odak alanlarÄ±</span>
            </div>
            <div class="timeline-list" id="timeline-list"></div>
          </div>

          <div class="skills-card">
            <div class="card-title">
              <div id="skills-title">Yetkinlik Profili</div>
              <span id="skills-sub">Developer, PM, CTO ve HR gÃ¶zÃ¼nden</span>
            </div>

            <div class="skills-bars" id="skills-bars">
              <div class="skill-line">
                <div class="skill-label"><span id="s1">Ä°ÅŸ Analizi &amp; Gereksinim YÃ¶netimi</span><span id="s1l">Uzman</span></div>
                <div class="skill-bar"><div class="skill-fill" style="width:96%;"></div></div>
              </div>

              <div class="skill-line">
                <div class="skill-label"><span id="s2">ÃœrÃ¼n YÃ¶netimi &amp; Roadmap</span><span id="s2l">Ä°leri</span></div>
                <div class="skill-bar"><div class="skill-fill" style="width:88%;"></div></div>
              </div>

              <div class="skill-line">
                <div class="skill-label"><span id="s3">API / Entegrasyon &amp; Test OdaklÄ± YaklaÅŸÄ±m</span><span id="s3l">Ä°leri</span></div>
                <div class="skill-bar"><div class="skill-fill" style="width:90%;"></div></div>
              </div>

              <div class="skill-line">
                <div class="skill-label"><span id="s4">RegÃ¼lasyon, Risk &amp; Denetim Beklentileri</span><span id="s4l">Ä°leri</span></div>
                <div class="skill-bar"><div class="skill-fill" style="width:92%;"></div></div>
              </div>

              <div class="skill-line">
                <div class="skill-label"><span id="s5">Ekip LiderliÄŸi &amp; KoÃ§luk</span><span id="s5l">Ä°leri</span></div>
                <div class="skill-bar"><div class="skill-fill" style="width:86%;"></div></div>
              </div>

              <div class="skill-line">
                <div class="skill-label"><span id="s6">Sunum, Storytelling &amp; Stakeholder YÃ¶netimi</span><span id="s6l">Ä°leri</span></div>
                <div class="skill-bar"><div class="skill-fill" style="width:90%;"></div></div>
              </div>
            </div>

            <p class="small-note" id="skills-note" style="margin-top:6px;">
              Developer iÃ§in: net acceptance criteria, Ã¶rnek API payloadâ€™larÄ± ve test senaryosu;
              PM/CTO iÃ§in: risk, maliyet ve roadmapi aynÄ± ekranda gÃ¶rebilme;
              HR &amp; headhunter iÃ§in: rol, etki alanÄ± ve motivasyonu net anlatan bir yapÄ±.
            </p>
          </div>
        </section>
      </div>

      <!-- PROJECTS -->
      <section class="projects-card" style="margin-top:18px;">
        <div class="card-title">
          <div id="projects-title">Ã–ne Ã‡Ä±kan Projeler</div>
          <span id="projects-sub">Gedik YatÄ±rÄ±m, DÄ°AS, UPT, Akbank ve diÄŸerleri</span>
        </div>

        <div class="projects-grid" id="projects-grid"></div>
      </section>

      <!-- QA -->
      <section class="qa-card" id="qa-section">
        <div class="card-title">
          <div id="qa-title">HR SorularÄ± (HazÄ±r Sesli Cevaplar)</div>
          <span id="qa-sub">Developer, PM, CTO ve HR iÃ§in net cevaplar</span>
        </div>

        <div class="qa-layout">
          <div class="qa-buttons" id="qa-buttons"></div>

          <div>
            <div class="qa-answer" id="qa-answer-box"></div>

            <div class="qa-footer">
              <div class="io-controls">
                <button class="io-btn active" id="speaker-toggle" title="Sesli anlatÄ±mÄ± aÃ§/kapat">
                  <span>ğŸ”Š</span>
                </button>
              </div>
              <span id="voice-note">Ses: TÃ¼rkÃ§e, anlaÅŸÄ±lÄ±r ve doÄŸal hÄ±zda okunur.</span>
              <span class="small-note" id="salary-note">
                MaaÅŸ beklentisi gibi rakam detaylarÄ±nÄ±, yÃ¼z yÃ¼ze veya online mÃ¼lakatta
                ÅŸirketin Ã¼cret politikasÄ± netleÅŸtikten sonra paylaÅŸmayÄ± tercih ediyorum.
              </span>
            </div>
          </div>
        </div>

        <div class="qa-input-row">
          <div class="qa-input-wrapper">
            <input id="free-question" type="text"
              placeholder="Bana bir soru sor (Ã¶rn: Gedikâ€™te tam olarak ne yapÄ±yorsun? Developer gÃ¶zÃ¼yle ne sunuyorsun?)" />
          </div>
          <button class="send-btn" id="free-ask-btn">GÃ¶nder</button>
        </div>
      </section>

    </div>
  </div>

  <script>
    // ===========================
    // STATE
    // ===========================
    let CURRENT_LANG = localStorage.getItem("cv_lang") || "tr";
    let voiceEnabled = true;
    let LAST_QA_ID = null;

    // ===========================
    // DOM
    // ===========================
    const modeTabEls = document.querySelectorAll(".mode-tab");
    const modeTextEl = document.getElementById("mode-text");

    const aboutTr = document.getElementById("about-short-tr");
    const aboutEn = document.getElementById("about-short-en");
    const enSummary = document.getElementById("en-summary");

    const chipRole = document.getElementById("chip-role");
    const chipDomain = document.getElementById("chip-domain");
    const linkLinkedin = document.getElementById("link-linkedin");
    const linkMedium = document.getElementById("link-medium");
    const langLabel = document.getElementById("lang-label");

    const timelineTitle = document.getElementById("timeline-title");
    const timelineSub = document.getElementById("timeline-sub");
    const timelineList = document.getElementById("timeline-list");

    const skillsTitle = document.getElementById("skills-title");
    const skillsSub = document.getElementById("skills-sub");
    const skillsNote = document.getElementById("skills-note");

    const projectsTitle = document.getElementById("projects-title");
    const projectsSub = document.getElementById("projects-sub");
    const projectsGrid = document.getElementById("projects-grid");

    const qaTitle = document.getElementById("qa-title");
    const qaSub = document.getElementById("qa-sub");
    const qaButtonsWrap = document.getElementById("qa-buttons");

    const answerBox = document.getElementById("qa-answer-box");
    const freeQuestionInput = document.getElementById("free-question");
    const freeAskBtn = document.getElementById("free-ask-btn");

    const speakerToggle = document.getElementById("speaker-toggle");
    const avatarEl = document.getElementById("avatar");

    const voiceNoteEl = document.getElementById("voice-note");
    const salaryNoteEl = document.getElementById("salary-note");

    const langPills = document.querySelectorAll(".lang-pill");

    // about list
    const aboutListEl = document.getElementById("about-list");

    // skills labels
    const S = {
      s1: document.getElementById("s1"), s1l: document.getElementById("s1l"),
      s2: document.getElementById("s2"), s2l: document.getElementById("s2l"),
      s3: document.getElementById("s3"), s3l: document.getElementById("s3l"),
      s4: document.getElementById("s4"), s4l: document.getElementById("s4l"),
      s5: document.getElementById("s5"), s5l: document.getElementById("s5l"),
      s6: document.getElementById("s6"), s6l: document.getElementById("s6l"),
    };

    // ===========================
    // CONTENT
    // ===========================
    const CONTENT = {
      tr: {
        headTitle: "Ekrem Åen â€“ EtkileÅŸimli Sesli CV",
        chips: {
          role: "Senior Business Analyst Team Lead / Product Manager",
          domain: "Sermaye PiyasalarÄ±, Ã–deme Sistemleri, Dijital CÃ¼zdan"
        },
        links: { linkedin: "LinkedIn Profilim", medium: "Medium YazÄ±larÄ±m" },
        langLabel: "Dil:",
        tabs: { genel: "Genel Mod", mulakat: "MÃ¼lakat Modu", teknik: "Teknik Mod", xr: "XR / EtkileÅŸim Modu" },

        modeTexts: {
          genel:
            "Åu anda Gedik YatÄ±rÄ±mâ€™da sermaye piyasalarÄ±, Check-SIM, STS entegrasyonu, mobil uygulama ve SIM bloke kaldÄ±rma gibi kritik projelerde, iÅŸ analizi ile Ã¼rÃ¼n yÃ¶netimini birleÅŸtiren hibrit bir rolde Ã§alÄ±ÅŸÄ±yorum.\n\n" +
            "Analiz, gereksinim yÃ¶netimi, kullanÄ±cÄ± yolculuÄŸu tasarÄ±mÄ± ve teknik ekiplerle aynÄ± masada detay Ã§Ã¶zebilme becerimi; regÃ¼lasyon bilgisi, API/entegrasyon deneyimi ve ekip liderliÄŸiyle birleÅŸtiriyorum. BÃ¶ylece developer, Ã¼rÃ¼n, operasyon, insan kaynaklarÄ± ve Ã¼st yÃ¶netim tarafÄ± aynÄ± ekranda net bir resim gÃ¶rebiliyor.",
          mulakat:
            "Bu mod, insan kaynaklarÄ±, iÅŸe alÄ±m uzmanlarÄ± ve yÃ¶netici rolleri iÃ§in tasarlandÄ±. HR sorularÄ±na hazÄ±r cevaplar, sesli anlatÄ±m ve serbest soru kutusu ile; mÃ¼lakata girmeden Ã¶nce benim profilimi net, tutarlÄ± ve detaylÄ± bir ÅŸekilde duyabilmeleri hedefleniyor.",
          teknik:
            "Teknik modda; STS, OTP, API, webhook, kart ve POS entegrasyonlarÄ±, BPMN modelleri, Postman koleksiyonlarÄ±, test senaryolarÄ± ve log/izleme yaklaÅŸÄ±mlarÄ±na odaklanÄ±yorum.\n\n" +
            "AmaÃ§, geliÅŸtirici ekiplerin hem analizi hem de entegrasyon kurgusunu okunabilir ve tekrarlanabilir ÅŸekilde kullanabilmesi.",
          xr:
            "XR / EtkileÅŸim modu; bu CVâ€™nin sesli, gÃ¶rsel ve soruâ€“cevap tarafÄ±nÄ± temsil ediyor. Klasik PDF CVâ€™lerden farklÄ± olarak; avatar, sesli anlatÄ±m, HR sorularÄ± ve mobil uyumlu tasarÄ±m sayesinde deneyim odaklÄ± bir profil sunuyorum."
        },

        aboutList: [
          "Spot dÃ¶viz, Check-SIM, SMS OTP, STS, dijital cÃ¼zdan ve kart Ã¼rÃ¼nlerinde uÃ§tan uca deneyim",
          "MÃ¼ÅŸteri ve regÃ¼lasyon beklentisini teknik Ã§Ã¶zÃ¼mle birleÅŸtiren iÅŸ analizi yaklaÅŸÄ±mÄ±",
          "API ve entegrasyon projelerinde Postman odaklÄ±, test destekli analiz ve dokÃ¼mantasyon",
          "Analist ekibi yÃ¶netimi, priorizasyon, roadmap ve iÅŸ yÃ¼kÃ¼ dengesi kurabilen liderlik",
          "Ã–nceki rollerde BEDAÅ, Vodafone ve benzeri paydaÅŸlarla Ã§ok taraflÄ± proje yÃ¶netimi deneyimi"
        ],

        timeline: {
          title: "Kariyer Zaman Ã‡izelgesi",
          sub: "Son roller ve odak alanlarÄ±",
          html: `
            <div class="timeline-item">
              <strong>Gedik YatÄ±rÄ±m â€“ Senior Business Analyst Team Lead</strong>
              <div class="company">Spot DÃ¶viz &amp; Trading, Check-SIM, STS, SMS OTP, mobil uygulama</div>
              <div class="meta">UÃ§tan uca iÅŸ analizi, Ã¼rÃ¼n yÃ¶netimi, operatÃ¶r & vendor koordinasyonu, regÃ¼lasyon ve maliyet odaklÄ± yaklaÅŸÄ±m</div>
            </div>
            <div class="timeline-item">
              <strong>DÄ°AS Teknoloji â€“ Senior Expert Business Analyst</strong>
              <div class="company">Prod sorunlarÄ±, ElasticSearch analizi, talep yÃ¶netimi, eÄŸitim ve entegrasyon</div>
              <div class="meta">Root-cause analizi, Jira / Confluence sÃ¼reÃ§leri, saha ve teknik ekiplerle Ã§alÄ±ÅŸma</div>
            </div>
            <div class="timeline-item">
              <strong>UPT Ã–deme â€“ Expert Business Analyst</strong>
              <div class="company">Dijital cÃ¼zdan, kart, Metropol POS, Uption Kart, rating, kurye entegrasyonlarÄ±</div>
              <div class="meta">In-app rating, deep link, kart &amp; POS akÄ±ÅŸlarÄ±, kurye APIâ€™leri ve veri odaklÄ± sÃ¼reÃ§ler</div>
            </div>
            <div class="timeline-item">
              <strong>Akbank â€“ Senior Business Analyst</strong>
              <div class="company">Tosla &amp; Tosla x Starbucks entegrasyonlarÄ±, referral ve kampanya kurgularÄ±</div>
              <div class="meta">BPMN, cashback &amp; Ã¶dÃ¼l sÃ¼reÃ§leri, App-to-App ve OAuth tabanlÄ± entegrasyon</div>
            </div>
          `
        },

        skills: {
          title: "Yetkinlik Profili",
          sub: "Developer, PM, CTO ve HR gÃ¶zÃ¼nden",
          labels: [
            ["Ä°ÅŸ Analizi & Gereksinim YÃ¶netimi", "Uzman"],
            ["ÃœrÃ¼n YÃ¶netimi & Roadmap", "Ä°leri"],
            ["API / Entegrasyon & Test OdaklÄ± YaklaÅŸÄ±m", "Ä°leri"],
            ["RegÃ¼lasyon, Risk & Denetim Beklentileri", "Ä°leri"],
            ["Ekip LiderliÄŸi & KoÃ§luk", "Ä°leri"],
            ["Sunum, Storytelling & Stakeholder YÃ¶netimi", "Ä°leri"]
          ],
          note:
            "Developer iÃ§in: net acceptance criteria, Ã¶rnek API payloadâ€™larÄ± ve test senaryosu;\n" +
            "PM/CTO iÃ§in: risk, maliyet ve roadmapi aynÄ± ekranda gÃ¶rebilme;\n" +
            "HR & headhunter iÃ§in: rol, etki alanÄ± ve motivasyonu net anlatan bir yapÄ±."
        },

        projects: {
          title: "Ã–ne Ã‡Ä±kan Projeler",
          sub: "Gedik YatÄ±rÄ±m, DÄ°AS, UPT, Akbank ve diÄŸerleri",
          html: `
            <article class="project-item">
              <h4>Gedik YatÄ±rÄ±m â€“ Spot DÃ¶viz &amp; Trading</h4>
              <div class="meta">Project Manager &amp; Senior Business Analyst â€“ Sermaye PiyasalarÄ±</div>
              <ul>
                <li>Spot dÃ¶viz ve trading Ã¼rÃ¼nlerinde uÃ§tan uca proje yÃ¶netimi ve iÅŸ analizi rolÃ¼nÃ¼ bir arada Ã¼stlendim.</li>
                <li>Kur, tatil gÃ¼nÃ¼ ve spread kurgularÄ±nÄ±; emir iletim, muhasebe ve risk akÄ±ÅŸlarÄ±yla birlikte tasarladÄ±m.</li>
                <li>Geneks, DX ve diÄŸer paydaÅŸlarla entegrasyon gereksinimlerini netleÅŸtirip canlÄ±ya geÃ§iÅŸ senaryolarÄ±nÄ± koordine ediyorum.</li>
              </ul>
              <div class="pill-row">
                <span class="mini-pill">Sermaye PiyasalarÄ±</span>
                <span class="mini-pill">Spot FX</span>
                <span class="mini-pill">Order &amp; Risk Flow</span>
              </div>
            </article>

            <article class="project-item">
              <h4>Gedik YatÄ±rÄ±m â€“ Check-SIM &amp; SIM Bloke KaldÄ±rma</h4>
              <div class="meta">Turatel STS &amp; OperatÃ¶r Entegrasyonu</div>
              <ul>
                <li>Turatel STS, operatÃ¶rler ve Geneks Ã¶n yÃ¼zleri arasÄ±nda SIM bloke kaldÄ±rma sÃ¼recini uÃ§tan uca modelledim.</li>
                <li>Retry mekanizmasÄ±, hata kodu standardizasyonu ve CRM yÃ¶nlendirmelerini kapsayan analiz dokÃ¼manÄ±nÄ± hazÄ±rladÄ±m.</li>
                <li>SIM bloke kullanÄ±cÄ±larÄ±nÄ±n yatÄ±rÄ±m danÄ±ÅŸmanÄ± Ã¼zerinden iÅŸlem yapabileceÄŸi alternatif akÄ±ÅŸlarÄ± tasarladÄ±m.</li>
              </ul>
              <div class="pill-row">
                <span class="mini-pill">Check-SIM</span>
                <span class="mini-pill">STS</span>
                <span class="mini-pill">OperatÃ¶r Entegrasyonu</span>
              </div>
            </article>

            <article class="project-item">
              <h4>Gedik YatÄ±rÄ±m â€“ SMS OTP &amp; Telco Maliyet Analizi</h4>
              <div class="meta">Vodafone, Turkcell, TÃ¼rk Telekom ve Turatel iÅŸ birliÄŸi</div>
              <ul>
                <li>ÃœÃ§ operatÃ¶r ve Turatel Ã¼zerinden giden OTP trafiÄŸini detaylÄ± analiz ederek maliyet optimizasyon roadmapâ€™i oluÅŸturdum.</li>
                <li>OperatÃ¶r bazlÄ± maliyet daÄŸÄ±lÄ±mlarÄ±, yÄ±llÄ±k bÃ¼tÃ§e etkisi ve kampanya senaryolarÄ±nÄ± yÃ¶netici sunumu iÃ§in raporladÄ±m.</li>
                <li>Yeni fiyat teklifleri iÃ§in pazarlÄ±k alanlarÄ±nÄ± ve teknik mimari iyileÅŸtirmelerini birlikte ele alan bir Ã¶neri seti hazÄ±rladÄ±m.</li>
              </ul>
              <div class="pill-row">
                <span class="mini-pill">SMS OTP</span>
                <span class="mini-pill">Maliyet Analizi</span>
                <span class="mini-pill">Finansal Raporlama</span>
              </div>
            </article>

            <article class="project-item">
              <h4>DÄ°AS Teknoloji â€“ Prod SorunlarÄ± ve Talep YÃ¶netimi</h4>
              <div class="meta">KÄ±demli Ä°ÅŸ Analisti â€“ FinTech &amp; Telekom Projeleri</div>
              <ul>
                <li>Prod ortam hatalarÄ±nÄ± ElasticSearch ve SQL ile root-cause analizine tabi tutarak tespit sÃ¼resini kÄ±saltmaya odaklandÄ±m.</li>
                <li>Agile sprintâ€™lere entegre ettiÄŸim Ã§Ã¶zÃ¼m gÃ¼ncellemeleriyle prod geÃ§iÅŸ sÃ¼resini azalttÄ±m.</li>
                <li>Jira ve Confluenceâ€™ta talepleri tanÄ±mlayÄ±p Ã¶nceliklendirerek talep iÅŸleme hÄ±zÄ±nÄ± artÄ±rdÄ±m.</li>
              </ul>
              <div class="pill-row">
                <span class="mini-pill">Root-Cause Analysis</span>
                <span class="mini-pill">ElasticSearch</span>
                <span class="mini-pill">Talep YÃ¶netimi</span>
              </div>
            </article>

            <article class="project-item">
              <h4>DÄ°AS Teknoloji â€“ UTTS &amp; Lena Teknisyen EntegrasyonlarÄ±</h4>
              <div class="meta">KÄ±demli Ä°ÅŸ Analisti â€“ EÄŸitim &amp; Onboarding AkÄ±ÅŸlarÄ±</div>
              <ul>
                <li>BPMN ile teknisyen kullanÄ±cÄ± onboarding ve kayÄ±t sÃ¼reÃ§lerini modelledim.</li>
                <li>EÄŸitim modÃ¼llerini Jira Ã¼zerinden takip ederek saha ekiplerinin adaptasyon sÃ¼resini kÄ±saltmayÄ± hedefledim.</li>
                <li>Entegrasyon test planlarÄ±nÄ± koordine ederek operasyonel verimlilik ve dokÃ¼mantasyon kalitesini gÃ¼Ã§lendirdim.</li>
              </ul>
              <div class="pill-row">
                <span class="mini-pill">BPMN</span>
                <span class="mini-pill">EÄŸitim TasarÄ±mÄ±</span>
                <span class="mini-pill">Entegrasyon Testleri</span>
              </div>
            </article>

            <article class="project-item">
              <h4>UPT â€“ Uption Rating Ã‡alÄ±ÅŸmasÄ±</h4>
              <div class="meta">Ä°ÅŸ Analisti â€“ In-App Rating &amp; Deep Link</div>
              <ul>
                <li>In-app rating ve deep-link store yÃ¶nlendirmesi entegrasyonunu tasarlayÄ±p devreye alarak geri bildirim toplama oranÄ±nÄ± artÄ±rmaya odaklandÄ±m.</li>
                <li>KullanÄ±cÄ± davranÄ±ÅŸ odaklÄ± modal gÃ¶sterimleri ve A/B testleriyle puanlama katÄ±lÄ±mÄ±nÄ± iyileÅŸtirdim.</li>
                <li>Power BI dashboardâ€™larla rating performansÄ±nÄ± izlenebilir hÃ¢le getirdim.</li>
              </ul>
              <div class="pill-row">
                <span class="mini-pill">In-App Rating</span>
                <span class="mini-pill">Deep Linking</span>
                <span class="mini-pill">KullanÄ±cÄ± DavranÄ±ÅŸÄ±</span>
              </div>
            </article>

            <article class="project-item">
              <h4>UPT â€“ Uption Kart Entegrasyonu</h4>
              <div class="meta">Ä°ÅŸ Analisti â€“ Kart &amp; POS AkÄ±ÅŸlarÄ±</div>
              <ul>
                <li>AktifBank kart servis APIâ€™leri iÃ§in gereksinimleri toplayÄ±p kart Ã¶deme akÄ±ÅŸlarÄ±nÄ± BPMN ile modelledim.</li>
                <li>Postman tabanlÄ± entegrasyon ve regresyon senaryolarÄ±nÄ± tanÄ±mlayarak canlÄ±ya geÃ§iÅŸ Ã¶ncesi hata tekrar oranÄ±nÄ± azaltmayÄ± hedefledim.</li>
                <li>UAT test dÃ¶ngÃ¼lerini organize ederek prod ortamÄ±ndaki kritik hata sayÄ±sÄ±nÄ± dÃ¼ÅŸÃ¼rmeye odaklandÄ±m.</li>
              </ul>
              <div class="pill-row">
                <span class="mini-pill">Kart &amp; POS</span>
                <span class="mini-pill">BPMN</span>
                <span class="mini-pill">UAT</span>
              </div>
            </article>

            <article class="project-item">
              <h4>UPT â€“ Uption PTT Kurye &amp; Kuryenet / Metropol POS</h4>
              <div class="meta">Ä°ÅŸ Analisti â€“ Kurye ve POS EntegrasyonlarÄ±</div>
              <ul>
                <li>PTT Kurye ve Kuryenet APIâ€™lerini platforma entegre ederek manuel gÃ¶nderi adÄ±mlarÄ±nÄ± azaltmayÄ± hedefledim.</li>
                <li>Postman ile entegrasyon hatalarÄ±nÄ± senaryolaÅŸtÄ±rÄ±p operasyonel baÅŸarÄ±sÄ±zlÄ±k oranÄ±nÄ± dÃ¼ÅŸÃ¼rmeye odaklandÄ±m.</li>
                <li>Metropol POS cihazlarÄ± ile QR kod okuma entegrasyonunu tasarlayÄ±p Ã¶deme sÃ¼recini hÄ±zlandÄ±rdÄ±m.</li>
              </ul>
              <div class="pill-row">
                <span class="mini-pill">Kurye Entegrasyonu</span>
                <span class="mini-pill">Metropol POS</span>
                <span class="mini-pill">SÃ¼reÃ§ Optimizasyonu</span>
              </div>
            </article>

            <article class="project-item">
              <h4>Akbank â€“ Tosla &amp; Tosla x Starbucks Projeleri</h4>
              <div class="meta">Ä°ÅŸ Analisti â€“ Kampanya ve App-to-App Entegrasyonu</div>
              <ul>
                <li>â€œTosla ArkadaÅŸÄ±na Ã–nerâ€ kampanyasÄ± iÃ§in Ã§ok kanallÄ± referral akÄ±ÅŸÄ±nÄ± BPMN ile modelleyip devreye aldÄ±m.</li>
                <li>Cashback ve Ã¶dÃ¼l sÃ¼reÃ§lerini uÃ§tan uca entegre ederek kampanya verimliliÄŸini artÄ±rdÄ±m.</li>
                <li>Tosla ve Starbucks mobil uygulamalarÄ± arasÄ±nda App-to-App entegrasyonu ve OAuth tabanlÄ± kimlik doÄŸrulama akÄ±ÅŸlarÄ±nÄ± tasarladÄ±m.</li>
              </ul>
              <div class="pill-row">
                <span class="mini-pill">Referral KampanyasÄ±</span>
                <span class="mini-pill">Cashback</span>
                <span class="mini-pill">App-to-App</span>
              </div>
            </article>
          `
        },

        qa: {
          title: "HR SorularÄ± (HazÄ±r Sesli Cevaplar)",
          sub: "Developer, PM, CTO ve HR iÃ§in net cevaplar",
          defaultAnswer:
            "Bir soruyu sol taraftaki butonlardan seÃ§tiÄŸinde, burada hem yazÄ±lÄ± cevabÄ± gÃ¶rebilir hem de sesli olarak dinleyebilirsin.",
          voiceNote: "Ses: TÃ¼rkÃ§e, anlaÅŸÄ±lÄ±r ve doÄŸal hÄ±zda okunur.",
          salaryNote:
            "MaaÅŸ beklentisi gibi rakam detaylarÄ±nÄ±, yÃ¼z yÃ¼ze veya online mÃ¼lakatta ÅŸirketin Ã¼cret politikasÄ± netleÅŸtikten sonra paylaÅŸmayÄ± tercih ediyorum.",
          placeholder:
            "Bana bir soru sor (Ã¶rn: Gedikâ€™te tam olarak ne yapÄ±yorsun? Developer gÃ¶zÃ¼yle ne sunuyorsun?)",
          send: "GÃ¶nder",
          emptyQuestion: "Sorunu yazdÄ±ktan sonra tekrar dener misin?",
          btns: {
            intro: "KÄ±saca kendini ve kariyerini Ã¶zetler misin?",
            strengths: "GÃ¼Ã§lÃ¼ yÃ¶nlerin neler? Bir Ã¶rnek verir misin?",
            improve: "GeliÅŸtirmek istediÄŸin yÃ¶nler neler?",
            conflict: "Zor paydaÅŸ / Ã§atÄ±ÅŸma durumlarÄ±nÄ± nasÄ±l yÃ¶netirsin?",
            salary: "MaaÅŸ beklentin ve iÅŸâ€“yaÅŸam dengesi bakÄ±ÅŸ aÃ§Ä±n nedir?",
            future: "Ã–nÃ¼mÃ¼zdeki 3 yÄ±lda kendini nerede gÃ¶rmek istiyorsun?",
            education: "Hangi okuldan mezunsun, eÄŸitimi nasÄ±l konumlandÄ±rÄ±yorsun?",
            lastrole: "Gedik YatÄ±rÄ±mâ€™da tam olarak ne yapÄ±yorsun?",
            developer: "Seni bir developer gÃ¶zÃ¼nden nasÄ±l konumlamalÄ±?",
            cto: "Seni bir CTO / teknik yÃ¶netici gÃ¶zÃ¼nden nasÄ±l konumlamalÄ±?"
          },
          answers: {
            intro:
              "Kendimi kÄ±saca ÅŸÃ¶yle Ã¶zetleyebilirim: Sermaye piyasalarÄ±, Ã¶deme sistemleri ve dijital cÃ¼zdan tarafÄ±nda Ã§alÄ±ÅŸan, analizi ve Ã¼rÃ¼n yÃ¶netimini aynÄ± potada birleÅŸtiren bir Senior Business Analyst Team Lead / Product Managerâ€™Ä±m.\n\n" +
              "Akbank, UPT, DÄ°AS Teknoloji ve son olarak Gedik YatÄ±rÄ±mâ€™da; kampanya, kart, kurye, POS, SIM bloke kaldÄ±rma, STS entegrasyonu ve spot dÃ¶viz projelerinde uÃ§tan uca sorumluluk aldÄ±m. Teknik ekiplerle aynÄ± dili konuÅŸabilen, iÅŸi somut Ã§Ä±ktÄ±larla yÃ¶netmeye Ã§alÄ±ÅŸan biri olarak kendimi konumlandÄ±rÄ±yorum.",
            strengths:
              "GÃ¼Ã§lÃ¼ yÃ¶nlerimi Ã¼Ã§ baÅŸlÄ±kta toplayabilirim:\n\n" +
              "1) UÃ§tan uca dÃ¼ÅŸÃ¼nme: Bir Ã¶zelliÄŸin sadece ekranda deÄŸil; API, entegrasyon, muhasebe, risk ve raporlama etkisini birlikte ele alÄ±yorum.\n\n" +
              "2) RegÃ¼lasyon ve risk bakÄ±ÅŸÄ±: Projeyi regÃ¼lasyon Ã§erÃ§evesine oturtup riskleri erken gÃ¶rÃ¼nÃ¼r kÄ±lÄ±yorum.\n\n" +
              "3) Ä°letiÅŸim ve ekip Ã§alÄ±ÅŸmasÄ±: Analist ekibi ve geliÅŸtirici ekiplerle net, saygÄ±lÄ± ve Ã§Ã¶zÃ¼m odaklÄ± Ã§alÄ±ÅŸÄ±rÄ±m.",
            improve:
              "GeliÅŸtirmek istediÄŸim yÃ¶n; veri odaklÄ± Ã¼rÃ¼n yÃ¶netimi tarafÄ±nda metrik, dashboard ve deney tasarÄ±mÄ±nÄ± daha da gÃ¼Ã§lendirmek.\n\n" +
              "AyrÄ±ca liderlik tarafÄ±nda da geri bildirim kÃ¼ltÃ¼rÃ¼ ve mentorluk yaklaÅŸÄ±mÄ±yla analist ekibini bÃ¼yÃ¼tmeye odaklanÄ±yorum.",
            conflict:
              "Zor paydaÅŸ/Ã§atÄ±ÅŸma durumlarÄ±nda Ã¶nce â€˜nedenâ€™ sorusuna odaklanÄ±rÄ±m. Beklentileri, riskleri ve kÄ±sÄ±tlarÄ± netleÅŸtirdikten sonra ortak zeminde hÄ±zlÄ± ilerlemek kolaylaÅŸÄ±r.\n\n" +
              "Ã–zellikle canlÄ±ya geÃ§iÅŸ gibi kritik dÃ¶nemlerde; iÅŸ, teknik ve regÃ¼lasyon tarafÄ±nÄ± aynÄ± masada toplayÄ±p minimum riskle maksimum deÄŸer senaryosuna odaklanÄ±rÄ±m.",
            salary:
              "MaaÅŸ beklentimi tek cÃ¼mleyle ÅŸÃ¶yle Ã¶zetleyebilirim: ÃœstlendiÄŸim sorumluluk, yarattÄ±ÄŸÄ±m etki ve piyasa koÅŸullarÄ±yla uyumlu, iki taraf iÃ§in de adil bir seviyede olmasÄ±nÄ± isterim.\n\n" +
              "Ä°ÅŸâ€“yaÅŸam dengesinde kritik dÃ¶nemlerde ekstra efor koyarÄ±m; sÃ¼rdÃ¼rÃ¼lebilirlik iÃ§in Ã¶nceliklerin net olmasÄ±, emeÄŸin gÃ¶rÃ¼nÃ¼r olmasÄ± ve ekip iÃ§inde yÃ¼k paylaÅŸÄ±mÄ±nÄ±n dengeli olmasÄ± gerektiÄŸine inanÄ±rÄ±m.\n\n" +
              "Rakam tarafÄ±nÄ± ise rol kapsamÄ± ve Ã¼cret bandÄ± netleÅŸtikten sonra mÃ¼lakatta paylaÅŸmayÄ± tercih ederim.",
            future:
              "Ã–nÃ¼mÃ¼zdeki 3 yÄ±lda; sermaye piyasalarÄ± ve Ã¶deme sistemlerinde stratejik projeleri yÃ¶neten, analist ekibini bÃ¼yÃ¼ten ve Ã¼rÃ¼n portfÃ¶yÃ¼ne doÄŸrudan etki eden bir rolde kendimi gÃ¶rÃ¼yorum.\n\n" +
              "KÄ±sa vadede canlÄ±ya geÃ§iÅŸleri sorunsuz yÃ¶netip Ã¶lÃ§Ã¼lebilir iÅŸ sonuÃ§larÄ± Ã¼retmeye; orta vadede ise karar mekanizmalarÄ±na veri ve deneyim taÅŸÄ±yan liderlik rolÃ¼nÃ¼ gÃ¼Ã§lendirmeye odaklanÄ±yorum.",
            education:
              "EÄŸitimimi CVâ€™de kÄ±sa tutup odaÄŸÄ± proje Ã§Ä±ktÄ±larÄ± ve yetkinliklere Ã§ekmeyi tercih ediyorum.\n\n" +
              "Bunun yanÄ±nda iÅŸ analizi, Ã¼rÃ¼n yÃ¶netimi, proje yÃ¶netimi, UX, test, SQL ve veri analizi alanlarÄ±nda Ã§ok sayÄ±da eÄŸitim/sertifika programÄ±na katÄ±ldÄ±m. Ä°stenirse LinkedIn profilimde detaylÄ± listesi mevcut.",
            lastrole:
              "Gedik YatÄ±rÄ±mâ€™da Senior Business Analyst Team Lead olarak; Spot DÃ¶viz & Trading, Check-SIM, STS entegrasyonu, SMS OTP maliyet analizi ve mobil geliÅŸtirmelerde hibrit BA/PM bakÄ±ÅŸÄ±yla Ã§alÄ±ÅŸÄ±yorum.\n\n" +
              "AyrÄ±ca analist ekibinin planlamasÄ±, backlog Ã¶nceliklendirme ve iÅŸ yÃ¼kÃ¼ dengesini yÃ¶netiyor; paydaÅŸlar arasÄ±nda iletiÅŸim kÃ¶prÃ¼sÃ¼ kuruyorum.",
            developer:
              "Bir developer gÃ¶zÃ¼yle beni ÅŸÃ¶yle konumlayabilirsin: Gereksinimi sadece cÃ¼mle olarak deÄŸil; acceptance criteria, uÃ§tan uca akÄ±ÅŸ, hata senaryolarÄ±, Ã¶rnek request/response ve test senaryolarÄ±yla birlikte veren bir BA/PMâ€™im.\n\n" +
              "Genelde Postman Ã¼zerinde ortamlarÄ± kurar, happy-path ve edge-caseâ€™leri birlikte tasarlarÄ±m. â€œBu endpoint tam olarak ne yapacak?â€ sorusuna teknik detayla cevap vermeye dikkat ederim.",
            cto:
              "CTO / teknik yÃ¶netici perspektifinden: Ä°ÅŸ ve teknoloji tarafÄ±nÄ± dengeleyen, regÃ¼lasyon ve risk farkÄ±ndalÄ±ÄŸÄ± yÃ¼ksek, Ã§Ä±ktÄ±yÄ± Ã¶lÃ§Ã¼lebilir kÄ±lan bir profilim.\n\n" +
              "Kapsam, risk, baÄŸÄ±mlÄ±lÄ±k, bÃ¼tÃ§e etkisi ve operasyonel yÃ¼k gibi baÅŸlÄ±klarÄ± gÃ¶rÃ¼nÃ¼r kÄ±lar; geliÅŸtirme hÄ±zÄ±nÄ± dÃ¼ÅŸÃ¼rmeden iÅŸ beklentisini yÃ¶netebilen bir kÃ¶prÃ¼ rolÃ¼ Ã¼stlenirim."
          }
        }
      },

      en: {
        headTitle: "Ekrem Åen â€“ Interactive Voice CV",
        chips: {
          role: "Senior Business Analyst Team Lead / Product Manager",
          domain: "Capital Markets, Payment Systems, Digital Wallets"
        },
        links: { linkedin: "My LinkedIn", medium: "My Medium" },
        langLabel: "Lang:",
        tabs: { genel: "General Mode", mulakat: "Interview Mode", teknik: "Technical Mode", xr: "XR / Interactive Mode" },

        modeTexts: {
          genel:
            "At Gedik Investment, I work on critical initiatives such as capital markets products, Check-SIM, STS integration, mobile delivery and SIM-block removalâ€”bridging business analysis and product management in a hybrid role.\n\n" +
            "I combine requirements management, user journey design and deep collaboration with engineering teams with regulatory knowledge, API/integration experience and team leadershipâ€”so developers, product, operations, HR and executives can see a clear picture on the same screen.",
          mulakat:
            "This mode is designed for recruiters, hiring managers and leadership interviews. It provides ready-to-use HR answers, voice narration and a free-question box so stakeholders can understand my profile in a clear, consistent and detailed wayâ€”before the interview.",
          teknik:
            "In Technical Mode, I focus on STS, OTP, APIs, webhooks, card & POS integrations, BPMN models, Postman collections, test scenarios and logging/observability practices.\n\n" +
            "The goal is to help engineering teams reuse the analysis and integration design in a readable, repeatable way.",
          xr:
            "XR / Interactive Mode represents the voice, visual and Q&A experience of this CV. Unlike classic PDF resumes, it offers an experience-driven profile through an avatar, voice narration, HR Q&A and mobile-friendly design."
        },

        aboutList: [
          "End-to-end experience across Spot FX, Check-SIM, SMS OTP, STS, digital wallet and card products",
          "Business analysis that bridges customer and regulatory expectations with technical solutions",
          "Postman-driven, test-supported analysis and documentation for API & integration initiatives",
          "Leadership to manage analyst teams, prioritization, roadmap and workload balancing",
          "Multi-stakeholder delivery experience with partners such as BEDAÅ, Vodafone and similar in previous roles"
        ],

        timeline: {
          title: "Career Timeline",
          sub: "Latest roles & focus areas",
          html: `
            <div class="timeline-item">
              <strong>Gedik YatÄ±rÄ±m â€“ Senior Business Analyst Team Lead</strong>
              <div class="company">Spot FX &amp; Trading, Check-SIM, STS, SMS OTP, mobile app</div>
              <div class="meta">End-to-end analysis & product delivery; telco/vendor coordination; regulatory and cost-driven execution</div>
            </div>
            <div class="timeline-item">
              <strong>DÄ°AS Teknoloji â€“ Senior Expert Business Analyst</strong>
              <div class="company">Production issues, ElasticSearch analysis, demand management, training &amp; integration</div>
              <div class="meta">Root-cause analysis, Jira/Confluence processes, working closely with field and engineering teams</div>
            </div>
            <div class="timeline-item">
              <strong>UPT Ã–deme â€“ Expert Business Analyst</strong>
              <div class="company">Digital wallet, card, Metropol POS, Uption Card, rating, courier integrations</div>
              <div class="meta">In-app rating, deep linking, card &amp; POS flows, courier APIs and data-driven processes</div>
            </div>
            <div class="timeline-item">
              <strong>Akbank â€“ Senior Business Analyst</strong>
              <div class="company">Tosla &amp; Tosla x Starbucks integrations, referral and campaign design</div>
              <div class="meta">BPMN, cashback &amp; rewards, App-to-App integrations and OAuth-based flows</div>
            </div>
          `
        },

        skills: {
          title: "Skills Profile",
          sub: "From a developer, PM, CTO and HR lens",
          labels: [
            ["Business Analysis & Requirements", "Expert"],
            ["Product Management & Roadmap", "Advanced"],
            ["API / Integration & Test-Driven Approach", "Advanced"],
            ["Regulation, Risk & Audit Readiness", "Advanced"],
            ["Team Leadership & Coaching", "Advanced"],
            ["Presentation, Storytelling & Stakeholder Management", "Advanced"]
          ],
          note:
            "For developers: clear acceptance criteria, sample API payloads and test scenarios;\n" +
            "For PM/CTO: visibility of risk, cost and roadmap on one screen;\n" +
            "For HR/headhunters: a structure that clearly communicates role, impact and motivation."
        },

        projects: {
          title: "Featured Projects",
          sub: "Gedik Investment, DÄ°AS, UPT, Akbank and more",
          html: `
            <article class="project-item">
              <h4>Gedik YatÄ±rÄ±m â€“ Spot FX &amp; Trading</h4>
              <div class="meta">Project Manager &amp; Senior Business Analyst â€“ Capital Markets</div>
              <ul>
                <li>Led end-to-end project management and business analysis for Spot FX and trading products.</li>
                <li>Designed FX rate, holiday calendar and spread logic together with order routing, accounting and risk flows.</li>
                <li>Clarified integration requirements with Geneks, DX and other stakeholders and coordinated go-live scenarios.</li>
              </ul>
              <div class="pill-row">
                <span class="mini-pill">Capital Markets</span>
                <span class="mini-pill">Spot FX</span>
                <span class="mini-pill">Order &amp; Risk Flow</span>
              </div>
            </article>

            <article class="project-item">
              <h4>Gedik YatÄ±rÄ±m â€“ Check-SIM &amp; SIM-Block Removal</h4>
              <div class="meta">Turatel STS &amp; Telco Integration</div>
              <ul>
                <li>Modeled the end-to-end SIM-block removal journey across Turatel STS, telcos and Geneks front-ends.</li>
                <li>Prepared analysis covering retry mechanisms, error-code standardization and CRM handoff/redirection.</li>
                <li>Designed alternative flows so SIM-blocked users can proceed via investment advisors.</li>
              </ul>
              <div class="pill-row">
                <span class="mini-pill">Check-SIM</span>
                <span class="mini-pill">STS</span>
                <span class="mini-pill">Telco Integration</span>
              </div>
            </article>

            <article class="project-item">
              <h4>Gedik YatÄ±rÄ±m â€“ SMS OTP &amp; Telco Cost Analysis</h4>
              <div class="meta">Vodafone, Turkcell, TÃ¼rk Telekom &amp; Turatel collaboration</div>
              <ul>
                <li>Analyzed OTP traffic across three telcos and Turatel, building a cost-optimization roadmap.</li>
                <li>Reported operator-level cost breakdowns, annual budget impact and campaign scenarios for leadership updates.</li>
                <li>Prepared proposal sets combining negotiation levers with technical architecture improvements.</li>
              </ul>
              <div class="pill-row">
                <span class="mini-pill">SMS OTP</span>
                <span class="mini-pill">Cost Analysis</span>
                <span class="mini-pill">Financial Reporting</span>
              </div>
            </article>

            <article class="project-item">
              <h4>DÄ°AS Teknoloji â€“ Production Issues &amp; Demand Management</h4>
              <div class="meta">Senior Business Analyst â€“ FinTech &amp; Telecom</div>
              <ul>
                <li>Reduced mean time to identify issues by root-cause analysis using ElasticSearch and SQL.</li>
                <li>Integrated fixes into Agile sprints to shorten production transition time.</li>
                <li>Improved request throughput by defining and prioritizing demands in Jira/Confluence.</li>
              </ul>
              <div class="pill-row">
                <span class="mini-pill">Root-Cause Analysis</span>
                <span class="mini-pill">ElasticSearch</span>
                <span class="mini-pill">Demand Management</span>
              </div>
            </article>

            <article class="project-item">
              <h4>DÄ°AS Teknoloji â€“ UTTS &amp; Lena Technician Integrations</h4>
              <div class="meta">Senior Business Analyst â€“ Training &amp; Onboarding Flows</div>
              <ul>
                <li>Modeled technician onboarding and registration flows using BPMN.</li>
                <li>Tracked training modules via Jira to shorten field-team adoption time.</li>
                <li>Coordinated integration test plans to improve operational efficiency and documentation quality.</li>
              </ul>
              <div class="pill-row">
                <span class="mini-pill">BPMN</span>
                <span class="mini-pill">Training Design</span>
                <span class="mini-pill">Integration Testing</span>
              </div>
            </article>

            <article class="project-item">
              <h4>UPT â€“ Uption Rating</h4>
              <div class="meta">Business Analyst â€“ In-App Rating &amp; Deep Link</div>
              <ul>
                <li>Delivered in-app rating and deep-link store redirection to increase feedback capture rate.</li>
                <li>Improved rating participation through behavior-driven modals and A/B tests.</li>
                <li>Made rating performance observable with BI dashboards.</li>
              </ul>
              <div class="pill-row">
                <span class="mini-pill">In-App Rating</span>
                <span class="mini-pill">Deep Linking</span>
                <span class="mini-pill">User Behavior</span>
              </div>
            </article>

            <article class="project-item">
              <h4>UPT â€“ Uption Card Integration</h4>
              <div class="meta">Business Analyst â€“ Card &amp; POS Flows</div>
              <ul>
                <li>Collected requirements for card-service APIs and modeled card payment flows via BPMN.</li>
                <li>Defined Postman-based integration and regression scenarios to reduce pre-go-live defect recurrence.</li>
                <li>Organized UAT cycles to reduce critical production issues.</li>
              </ul>
              <div class="pill-row">
                <span class="mini-pill">Card &amp; POS</span>
                <span class="mini-pill">BPMN</span>
                <span class="mini-pill">UAT</span>
              </div>
            </article>

            <article class="project-item">
              <h4>UPT â€“ Courier Integrations &amp; Metropol POS</h4>
              <div class="meta">Business Analyst â€“ Courier &amp; POS Integrations</div>
              <ul>
                <li>Integrated courier APIs to reduce manual shipment creation steps.</li>
                <li>Scenario-tested integration failures via Postman to reduce operational failure rate.</li>
                <li>Designed QR scanning integration with Metropol POS devices to speed up payments.</li>
              </ul>
              <div class="pill-row">
                <span class="mini-pill">Courier Integration</span>
                <span class="mini-pill">Metropol POS</span>
                <span class="mini-pill">Process Optimization</span>
              </div>
            </article>

            <article class="project-item">
              <h4>Akbank â€“ Tosla &amp; Tosla x Starbucks</h4>
              <div class="meta">Business Analyst â€“ Campaigns &amp; App-to-App Integration</div>
              <ul>
                <li>Delivered multi-channel referral flow for â€œInvite a Friendâ€ using BPMN.</li>
                <li>Improved campaign efficiency through end-to-end cashback and rewards integrations.</li>
                <li>Designed App-to-App integration and OAuth-based authentication flows between Tosla and Starbucks apps.</li>
              </ul>
              <div class="pill-row">
                <span class="mini-pill">Referral</span>
                <span class="mini-pill">Cashback</span>
                <span class="mini-pill">App-to-App</span>
              </div>
            </article>
          `
        },

        qa: {
          title: "HR Questions (Ready Voice Answers)",
          sub: "Clear answers for developers, PMs, CTOs and HR",
          defaultAnswer:
            "Pick a question from the left to see the written answer here and listen to it with voice narration.",
          voiceNote: "Voice: English, clear and natural pace.",
          salaryNote:
            "I prefer to discuss numeric details (such as salary) after the role scope and the companyâ€™s compensation band are clarified during the interview.",
          placeholder:
            "Ask me anything (e.g., What exactly do you do at Gedik? What do you provide from a developer perspective?)",
          send: "Send",
          emptyQuestion: "Please type your question and try again.",
          btns: {
            intro: "Can you briefly summarize yourself and your career?",
            strengths: "What are your strengths? Can you give an example?",
            improve: "What would you like to improve?",
            conflict: "How do you manage difficult stakeholders / conflicts?",
            salary: "What is your salary expectation and view on workâ€“life balance?",
            future: "Where do you see yourself in 3 years?",
            education: "What is your education background and how do you position it?",
            lastrole: "What exactly do you do at Gedik YatÄ±rÄ±m?",
            developer: "How should a developer position you?",
            cto: "How should a CTO / tech leader position you?"
          },
          answers: {
            intro:
              "In short: Iâ€™m a hybrid Senior Business Analyst Team Lead / Product Manager working across capital markets, payments and digital wallets.\n\n" +
              "Across Akbank, UPT, DÄ°AS Teknoloji and now Gedik Investment, Iâ€™ve owned end-to-end delivery for campaigns, card, courier, POS, SIM-block removal, STS integration and Spot FX initiativesâ€”bridging business, regulation and engineering with a focus on measurable outcomes.",
            strengths:
              "Iâ€™d summarize my strengths in three areas:\n\n" +
              "1) End-to-end thinking: I consider not only UI but also APIs, integrations, accounting, risk and reporting impacts.\n\n" +
              "2) Regulation & risk awareness: I align delivery with compliance and make risks visible early.\n\n" +
              "3) Communication & collaboration: I work with clarity and respect across analyst teams, engineering and stakeholders.",
            improve:
              "I continuously push myself in data-driven product practicesâ€”metrics, dashboards and experimentation.\n\n" +
              "On the leadership side, I focus on mentoring and building a feedback culture so analysts grow beyond task execution.",
            conflict:
              "In conflict situations, I start with the â€˜whyâ€™: expectations, risks and constraints. Once theyâ€™re explicit, alignment becomes much easier.\n\n" +
              "Especially before go-live, I bring business, tech and compliance into the same conversation and converge on the scenario that delivers maximum value with minimum risk.",
            salary:
              "My salary expectation is aligned with scope, impact and market conditions, aiming for a fair level for both sides.\n\n" +
              "On workâ€“life balance: I can step up during critical phases, but I believe sustainability requires clear priorities, visible effort and balanced workload.\n\n" +
              "I prefer to discuss exact numbers once the role scope and compensation band are clarified during the interview.",
            future:
              "In the next 3 years, I see myself leading strategic initiatives in capital markets and paymentsâ€”growing the analyst team and directly impacting the product portfolio.\n\n" +
              "Short term: successful go-lives and measurable business outcomes. Mid term: stronger leadership influence by bringing data and experience into decision-making.",
            education:
              "I keep education concise in the resume and prioritize measurable project outcomes and competencies.\n\n" +
              "That said, Iâ€™ve completed multiple trainings/certifications in BA, product management, project management, UX, testing, SQL and analytics. Details are available on my LinkedIn if needed.",
            lastrole:
              "At Gedik Investment, I work as Senior Business Analyst Team Lead on Spot FX & Trading, Check-SIM, STS integration, SMS OTP cost analysis and mobile deliveryâ€”bridging BA and product management.\n\n" +
              "I also manage analyst planning, backlog prioritization and workload balance, and act as a communication bridge across stakeholders.",
            developer:
              "From a developer perspective: I translate requirements into actionable deliverablesâ€”acceptance criteria, end-to-end flows, error scenarios, sample request/response and test cases.\n\n" +
              "I often set up environments in Postman and design both happy-path and edge-cases together, answering â€œwhat does this endpoint do?â€ with technical clarity.",
            cto:
              "From a CTO lens: I balance business and technology with strong regulation/risk awareness and measurable outcomes.\n\n" +
              "I make scope, risk, dependencies, budget impact and operational load visibleâ€”acting as a bridge that manages expectations without slowing engineering delivery."
          }
        }
      }
    };

    // ===========================
    // UTIL
    // ===========================
    function normalizeTR(str) {
      return str
        .toLowerCase()
        .replace(/Ã§/g, "c").replace(/ÄŸ/g, "g").replace(/Ä±/g, "i")
        .replace(/Ã¶/g, "o").replace(/ÅŸ/g, "s").replace(/Ã¼/g, "u");
    }

    // ===========================
    // RENDER FUNCTIONS
    // ===========================
    function renderAboutList(list) {
      aboutListEl.innerHTML = list.map(x => `<li>${x}</li>`).join("");
    }

    function renderTimeline(html) { timelineList.innerHTML = html; }
    function renderProjects(html) { projectsGrid.innerHTML = html; }

    function renderQABtns(btns) {
      const order = ["intro","strengths","improve","conflict","salary","future","education","lastrole","developer","cto"];
      qaButtonsWrap.innerHTML = order.map(id => {
        return `<button class="qa-btn" data-question-id="${id}">${btns[id]}</button>`;
      }).join("");

      // bind click
      qaButtonsWrap.querySelectorAll(".qa-btn").forEach(btn => {
        btn.addEventListener("click", () => {
          const id = btn.getAttribute("data-question-id");
          LAST_QA_ID = id;
          const text = CONTENT[CURRENT_LANG].qa.answers[id];
          if (!text) return;
          answerBox.textContent = text;
          speakText(text);
        });
      });
    }

    function applySkillsLabels(labels) {
      // labels: [ [name, level], ... ]
      const map = [
        ["s1","s1l"], ["s2","s2l"], ["s3","s3l"],
        ["s4","s4l"], ["s5","s5l"], ["s6","s6l"]
      ];
      map.forEach((pair, idx) => {
        const [nameId, lvlId] = pair;
        if (labels[idx]) {
          S[nameId].textContent = labels[idx][0];
          S[lvlId].textContent = labels[idx][1];
        }
      });
    }

    function applyLang(lang) {
      CURRENT_LANG = lang;
      localStorage.setItem("cv_lang", lang);

      // update <title>
      document.title = CONTENT[lang].headTitle;

      // chips + links
      chipRole.textContent = CONTENT[lang].chips.role;
      chipDomain.textContent = CONTENT[lang].chips.domain;
      linkLinkedin.textContent = CONTENT[lang].links.linkedin;
      linkMedium.textContent = CONTENT[lang].links.medium;
      langLabel.textContent = CONTENT[lang].langLabel;

      // tabs text
      document.getElementById("tab-genel").textContent = CONTENT[lang].tabs.genel;
      document.getElementById("tab-mulakat").textContent = CONTENT[lang].tabs.mulakat;
      document.getElementById("tab-teknik").textContent = CONTENT[lang].tabs.teknik;
      document.getElementById("tab-xr").textContent = CONTENT[lang].tabs.xr;

      // show about TR/EN blocks
      if (lang === "tr") {
        aboutTr.style.display = "";
        aboutEn.style.display = "none";
        enSummary.style.display = "none";
      } else {
        aboutTr.style.display = "none";
        aboutEn.style.display = "";
        enSummary.style.display = "";
      }

      // mode text based on active mode
      const activeModeBtn = document.querySelector(".mode-tab.active");
      const activeMode = activeModeBtn ? activeModeBtn.getAttribute("data-mode") : "genel";
      modeTextEl.textContent = CONTENT[lang].modeTexts[activeMode] || CONTENT[lang].modeTexts.genel;

      // about list
      renderAboutList(CONTENT[lang].aboutList);

      // timeline
      timelineTitle.textContent = CONTENT[lang].timeline.title;
      timelineSub.textContent = CONTENT[lang].timeline.sub;
      renderTimeline(CONTENT[lang].timeline.html);

      // skills
      skillsTitle.textContent = CONTENT[lang].skills.title;
      skillsSub.textContent = CONTENT[lang].skills.sub;
      applySkillsLabels(CONTENT[lang].skills.labels);
      skillsNote.textContent = CONTENT[lang].skills.note;

      // projects
      projectsTitle.textContent = CONTENT[lang].projects.title;
      projectsSub.textContent = CONTENT[lang].projects.sub;
      renderProjects(CONTENT[lang].projects.html);

      // QA
      qaTitle.textContent = CONTENT[lang].qa.title;
      qaSub.textContent = CONTENT[lang].qa.sub;
      voiceNoteEl.textContent = CONTENT[lang].qa.voiceNote;
      salaryNoteEl.textContent = CONTENT[lang].qa.salaryNote;
      freeQuestionInput.placeholder = CONTENT[lang].qa.placeholder;
      freeAskBtn.textContent = CONTENT[lang].qa.send;

      // default answer text
      if (!LAST_QA_ID) {
        answerBox.textContent = CONTENT[lang].qa.defaultAnswer;
      } else {
        // if user already clicked a QA button, keep that answer but translate it
        const text = CONTENT[lang].qa.answers[LAST_QA_ID];
        if (text) answerBox.textContent = text;
      }

      renderQABtns(CONTENT[lang].qa.btns);

      // active pill UI
      langPills.forEach(p => p.classList.toggle("active", p.getAttribute("data-lang") === lang));
    }

    // ===========================
    // MODE HANDLERS
    // ===========================
    modeTabEls.forEach((btn) => {
      btn.addEventListener("click", () => {
        modeTabEls.forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");
        const mode = btn.getAttribute("data-mode");
        modeTextEl.textContent = CONTENT[CURRENT_LANG].modeTexts[mode] || CONTENT[CURRENT_LANG].modeTexts.genel;
      });
    });

    // language pills
    langPills.forEach((pill) => {
      pill.addEventListener("click", () => {
        const lang = pill.getAttribute("data-lang");
        applyLang(lang);
      });
    });

    // ===========================
    // FREE QUESTION (TR/EN)
    // ===========================
    function answerFreeQuestion(qRaw) {
      const q = (qRaw || "").trim();
      if (!q) return CONTENT[CURRENT_LANG].qa.emptyQuestion;

      if (CURRENT_LANG === "tr") {
        const n = normalizeTR(q);

        if (n.includes("gedik") || n.includes("spot doviz") || n.includes("trading")) {
          return "Gedik YatÄ±rÄ±mâ€™da spot dÃ¶viz ve trading projelerinde; kur, tatil gÃ¼nÃ¼, spread, emir iletim, muhasebe ve risk akÄ±ÅŸlarÄ±nÄ± uÃ§tan uca tasarladÄ±ÄŸÄ±m hibrit bir rolÃ¼m var. AyrÄ±ca Check-SIM, STS ve SMS OTP maliyet analizlerinin de iÅŸ analizi ve koordinasyonundan sorumluyum.";
        }

        if (n.includes("upt") || n.includes("uption") || n.includes("metropol") || n.includes("kurye")) {
          return "UPT tarafÄ±nda Uption Kart, Metropol POS, PTT Kurye ve Kuryenet entegrasyonlarÄ± Ã¼zerinde Ã§alÄ±ÅŸtÄ±m. Kart, POS, dijital cÃ¼zdan ve kurye akÄ±ÅŸlarÄ±nÄ± API seviyesinde modelleyip Postman senaryolarÄ±yla birlikte yÃ¶nettim. AyrÄ±ca Uption Rating Ã§alÄ±ÅŸmasÄ± ile in-app rating ve deep link entegrasyonlarÄ±nÄ± tasarladÄ±m.";
        }

        if (n.includes("dias")) {
          return "DÄ°AS Teknolojiâ€™de prod sorunlarÄ± ve talep yÃ¶netimi tarafÄ±nda; ElasticSearch, log analizi ve Jira talep sÃ¼reci Ã¼zerinden root-cause tespiti yaparak, hatalarÄ±n tespit ve Ã§Ã¶zÃ¼m sÃ¼resini kÄ±saltmaya odaklandÄ±m. AyrÄ±ca UTTS ve Lena teknisyen entegrasyonlarÄ±nda eÄŸitim ve onboarding akÄ±ÅŸlarÄ±nÄ± BPMN ile modelledim.";
        }

        if (n.includes("akbank") || n.includes("tosla") || n.includes("starbucks")) {
          return "Akbankâ€™ta Tosla ve Tosla x Starbucks projelerinde; referral kampanyalarÄ±, cashback & Ã¶dÃ¼l sÃ¼reÃ§leri ve App-to-App entegrasyon akÄ±ÅŸlarÄ± Ã¼zerinde Ã§alÄ±ÅŸtÄ±m. BPMN diyagramlarÄ±, kampanya kurallarÄ± ve OAuth tabanlÄ± entegrasyonlarla hem iÅŸ hem de teknik ekiplerle birlikte ilerledim.";
        }

        if (n.includes("developer") || n.includes("gelistirici") || n.includes("yazilimci")) return CONTENT.tr.qa.answers.developer;
        if (n.includes("cto") || n.includes("teknik yonetici") || n.includes("teknik lider")) return CONTENT.tr.qa.answers.cto;

        if (n.includes("guc") || n.includes("gucu") || n.includes("guc yon")) return CONTENT.tr.qa.answers.strengths;
        if (n.includes("maas") || n.includes("ucret") || n.includes("salary")) return CONTENT.tr.qa.answers.salary;
        if (n.includes("uc yil") || n.includes("3 yil") || n.includes("gelecek")) return CONTENT.tr.qa.answers.future;
        if (n.includes("okul") || n.includes("universite") || n.includes("egitim")) return CONTENT.tr.qa.answers.education;
        if (n.includes("ne yapiyorsun") || n.includes("gorevin") || n.includes("rolun")) return CONTENT.tr.qa.answers.lastrole;
        if (n.includes("kendini") || n.includes("kimsin") || n.includes("ozet")) return CONTENT.tr.qa.answers.intro;

        return "Soru iÃ§in teÅŸekkÃ¼r ederim. Bu interaktif CVâ€™de, PDFâ€™lere sÄ±ÄŸmayan kÄ±sÄ±mlarÄ±; proje Ã§Ä±ktÄ±larÄ±, rol tanÄ±mÄ±, teknik derinlik ve liderlik bakÄ±ÅŸ aÃ§Ä±sÄ± olarak Ã¶ne Ã§Ä±karmaya Ã§alÄ±ÅŸtÄ±m.\n\nÃ–zetle; sermaye piyasalarÄ±, Ã¶deme sistemleri, dijital cÃ¼zdan ve entegrasyon dÃ¼nyasÄ±nda, hem analizi hem de Ã¼rÃ¼nÃ¼ aynÄ± potada birleÅŸtiren; geliÅŸtirici, Ã¼rÃ¼n, operasyon, insan kaynaklarÄ± ve Ã¼st yÃ¶netimle ortak dil yakalayabilen bir Senior Business Analyst Team Lead / Product Manager olarak Ã§alÄ±ÅŸÄ±yorum.";
      }

      // EN
      const e = q.toLowerCase();

      if (e.includes("gedik") || e.includes("spot fx") || e.includes("trading")) {
        return "At Gedik Investment, I work in a hybrid BA/PM role across Spot FX and trading initiativesâ€”covering FX rate logic, holiday calendars, spreads, order routing, accounting and risk flows end-to-end. I also contribute to Check-SIM, STS integration and SMS OTP cost analysis coordination.";
      }

      if (e.includes("upt") || e.includes("uption") || e.includes("metropol") || e.includes("courier")) {
        return "At UPT, I worked on Uption Card, Metropol POS and courier integrations (PTT / Kuryenet). I modeled card/POS/wallet/courier journeys at API level and managed them with Postman scenarios. I also delivered the Uption Rating work, including in-app rating and deep link integrations.";
      }

      if (e.includes("dias")) {
        return "At DÄ°AS Teknoloji, I focused on production issues and demand managementâ€”root-causing incidents via ElasticSearch/log analysis and Jira flows to reduce investigation and resolution time. I also modeled onboarding/training flows for technician integrations using BPMN.";
      }

      if (e.includes("akbank") || e.includes("tosla") || e.includes("starbucks")) {
        return "At Akbank, I worked on Tosla and Tosla x Starbucks initiativesâ€”referral campaigns, cashback & rewards and App-to-App integration flows. I used BPMN, campaign rules and OAuth-based integrations while collaborating closely with business and engineering teams.";
      }

      if (e.includes("developer") || e.includes("engineer")) return CONTENT.en.qa.answers.developer;
      if (e.includes("cto") || e.includes("tech leader") || e.includes("engineering manager")) return CONTENT.en.qa.answers.cto;
      if (e.includes("strength")) return CONTENT.en.qa.answers.strengths;
      if (e.includes("salary") || e.includes("compensation")) return CONTENT.en.qa.answers.salary;
      if (e.includes("3 year") || e.includes("future")) return CONTENT.en.qa.answers.future;
      if (e.includes("education") || e.includes("university")) return CONTENT.en.qa.answers.education;
      if (e.includes("what do you do") || e.includes("role")) return CONTENT.en.qa.answers.lastrole;
      if (e.includes("introduce") || e.includes("about yourself") || e.includes("summary")) return CONTENT.en.qa.answers.intro;

      return "Thanks for the question. This interactive CV is built to capture what PDF resumes often missâ€”project outcomes, role clarity, technical depth and leadership perspective.\n\nIn short, I work at the intersection of capital markets, payments and integrations as a hybrid Senior Business Analyst Team Lead / Product Managerâ€”bridging developers, product, operations, HR and leadership with a shared, clear picture.";
    }

    freeAskBtn.addEventListener("click", () => {
      const q = freeQuestionInput.value;
      const ans = answerFreeQuestion(q);
      LAST_QA_ID = null;
      answerBox.textContent = ans;
      speakText(ans);
    });

    freeQuestionInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        freeAskBtn.click();
      }
    });

    // ===========================
    // SPEECH SYNTHESIS (TR/EN)
    // ===========================
    speakerToggle.addEventListener("click", () => {
      voiceEnabled = !voiceEnabled;
      speakerToggle.classList.toggle("active", voiceEnabled);
      if (!voiceEnabled) {
        window.speechSynthesis.cancel();
        setAvatarSpeaking(false);
      }
    });

    function setAvatarSpeaking(state) {
      if (!avatarEl) return;
      if (state) avatarEl.classList.add("speaking");
      else avatarEl.classList.remove("speaking");
    }

    function buildPhoneticTR(text) {
      // Only used for Turkish voice to read some English words more naturally
      const phraseMap = {
        "Enterprise Design Thinking": "Enterprays Dizayn Thinking",
        "Google Ads Apps Certification": "GugÄ±l Eds Eps SertifikeyÅŸÄ±n",
        "UFT One 2021.x Essentials": "Yu Ef Ti Van 2021 Esentials",
        "UX Foundation": "Yu Eks FaundeyÅŸÄ±n",
        "Prompt Engineering": "Prompt EncÄ±niring",
        "SQL Server": "Es Kiu El SÃ¶rvÄ±r",
        "Fundamentals of Business Analysis": "FandamentÄ±ls of BiznÄ±s Enelisis"
      };

      const wordMap = {
        FinTech: "Fin tek",
        API: "Ey Pi Ay",
        CRM: "Si Ar Em",
        Scrum: "Skram",
        Agile: "EcayÄ±l",
        SQL: "Es Kiu El",
        IBM: "Ay Bi Em",
        Google: "GugÄ±l",
        Server: "SÃ¶rvÄ±r",
        UX: "Yu Eks",
        UFT: "Yu Ef Ti"
      };

      let processed = text;

      Object.keys(phraseMap).forEach((key) => {
        processed = processed.replace(new RegExp(key, "g"), phraseMap[key]);
      });

      Object.keys(wordMap).forEach((key) => {
        processed = processed.replace(new RegExp("\\b" + key + "\\b", "g"), wordMap[key]);
      });

      return processed;
    }

    function pickVoice(langPrefix) {
      const voices = window.speechSynthesis.getVoices() || [];
      const preferred = voices.find(v => (v.lang || "").toLowerCase().startsWith(langPrefix));
      return preferred || null;
    }

    function speakText(text) {
      if (!voiceEnabled || !("speechSynthesis" in window)) return;
      if (!text || !text.trim()) return;

      try {
        window.speechSynthesis.cancel();

        const utter = new SpeechSynthesisUtterance(
          CURRENT_LANG === "tr" ? buildPhoneticTR(text) : text
        );

        if (CURRENT_LANG === "tr") {
          utter.lang = "tr-TR";
          utter.rate = 1;
          utter.pitch = 1;
          const v = pickVoice("tr");
          if (v) utter.voice = v;
        } else {
          utter.lang = "en-US";
          utter.rate = 1;
          utter.pitch = 1;
          const v = pickVoice("en");
          if (v) utter.voice = v;
        }

        utter.onstart = () => setAvatarSpeaking(true);
        utter.onend = () => setAvatarSpeaking(false);
        utter.onerror = () => setAvatarSpeaking(false);

        window.speechSynthesis.speak(utter);
      } catch (e) {
        setAvatarSpeaking(false);
      }
    }

    // ===========================
    // INIT
    // ===========================
    function init() {
      // speaker tooltip per language
      speakerToggle.title = (CURRENT_LANG === "tr") ? "Sesli anlatÄ±mÄ± aÃ§/kapat" : "Toggle voice narration";

      // apply language
      applyLang(CURRENT_LANG);

      // default mode text = genel (active)
      const activeModeBtn = document.querySelector(".mode-tab.active");
      const activeMode = activeModeBtn ? activeModeBtn.getAttribute("data-mode") : "genel";
      modeTextEl.textContent = CONTENT[CURRENT_LANG].modeTexts[activeMode] || CONTENT[CURRENT_LANG].modeTexts.genel;

      // default QA
      answerBox.textContent = CONTENT[CURRENT_LANG].qa.defaultAnswer;
    }

    // Some browsers load voices async; keep stable
    window.speechSynthesis.onvoiceschanged = () => {};

    init();

    // ===========================
    // CACHE BUST (commit-based)
    // ===========================
    (async function () {
      const owner = "ekremssen";
      const repo = "EkremSen_Interactive_CV";
      const branch = "main";
      const key = "cv_latest_sha";

      try {
        const url = `https://api.github.com/repos/${owner}/${repo}/commits/${branch}`;
        const res = await fetch(url, { cache: "no-store" });
        if (!res.ok) return;

        const data = await res.json();
        const sha = data.sha;
        const prev = localStorage.getItem(key);

        if (prev && prev !== sha) {
          const u = new URL(location.href);
          u.searchParams.set("v", sha.slice(0, 8));
          localStorage.setItem(key, sha);
          location.replace(u.toString());
          return;
        }

        if (!prev) localStorage.setItem(key, sha);
      } catch (e) {
        // silent
      }
    })();
  </script>
</body>
</html>
